{
  "meta:license": [
    "Copyright 2018 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://ns.adobe.com/experience/decisioning/profile-constraint",
  "meta:abstract": true,
  "meta:extensible": true,
  "type": "object",
  "title": "Profile Constraint",
  "description": "A profile constraint is a component of a decision option that defines the rules for testing if the option qualifies. Usually the option is tested against a user profile and the events that were observed for that profile, but the qualification rule can consider any context data as long as it can be described by an XDM schema.",
  "definitions": {
    "profile-constraint": {
      "type": "object",
      "properties": {
        "xdm:rule": {
          "type": "string",
          "format": "uri-reference",
          "title": "Eligibility Rule",
          "description": "The reference to a decision rule that evaluates to true or false for a given profile and/or other given contextual XDM objects. The rule is used to decide if the option is eligible for a given profile and context. The value is the URI (@id) of the decision rule that is referenced. See schema https://ns.adobe.com/experience/decision/rule"
        },
        "xdm:evaluatedFor": {
          "$ref": "https://ns.adobe.com/experience/decisioning/xdm-function-evaluation",
          "title": "Evaluation context for the expression in the profile constraint",
          "description": "Contains a value binding map where each key denotes a parameter by name and the value contains a reference that is resolved at runtime."
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/profile-constraint"
    }
  ]
}
